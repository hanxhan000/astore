# A股动态分析与决策支持 Web 系统 — 开发文档

## 项目概述
- 目标：构建一个数据驱动的 A 股分析与决策支持平台，覆盖数据采集、指标计算、策略信号、回测与可视化展示。
- 部署策略：优先支持静态托管（GitHub Pages 等），通过定时数据更新生成 JSON 静态资源供前端渲染；本地开发使用 Vite Dev Server。

## 技术架构
- 前端：`Vue 3 + Vite`，UI 组件库：`Element Plus`，图表：`ECharts`，路由：`vue-router`。
- 数据层：`AKShare + Python` 脚本定时拉取与清洗，生成 `public/data/*.json`。
- 自动化：后续使用 `GitHub Actions` 定时触发数据脚本、构建并部署静态站点。
- 存储：静态 JSON/CSV 为主；可扩展 `SQLite` 作为轻量数据仓库（选配）。

## 系统模块
- 核心数据层：股票列表、实时/历史行情、财务与公告（AKShare）。
- 分析决策层：技术指标（MA/MACD/RSI/布林带等）、基本面概览、信号生成器（如均线金叉、MACD 底背离）、策略回测。
- 用户表现层：实时监控看板、智能预警（浏览器通知/邮件，后续）、风险提示。
- 支撑层：用户与权限（后续）、操作日志（前端埋点/后端日志，后续）、数据安全与备份。

## 数据流水线
1. 定时任务触发（本地或 GitHub Actions）。
2. 通过 AKShare 拉取目标标的（指数/股票）的最新数据。
3. 清洗、计算必要指标，输出 JSON 到 `webapp/public/data/`。
4. 前端从 `public/data` 读取并渲染页面。

数据示例结构（`public/data/000001.json`）：
```json
{
  "symbol": "000001",
  "name": "平安银行",
  "kline": [
    {"date": "2024-10-01", "open": 10.2, "high": 10.5, "low": 10.0, "close": 10.3, "volume": 1200000},
    {"date": "2024-10-02", "open": 10.3, "high": 10.6, "low": 10.1, "close": 10.5, "volume": 1350000}
  ]
}
```

## 前端页面与路由
- `/` 看板：指数与热点板块概览、自选股表格、预警卡片、快照图表。
- `/stock/:symbol` 个股详情：分时/K 线、指标面板（MA/MACD/RSI/布林带）、策略信号提示、财务与公告概览。

核心组件
- `ChartKLine.vue`：K 线与技术指标绘制（ECharts），支持动态数据。
- `SignalBadge.vue`（后续）：根据策略输出买入/卖出/观望信号。

## 策略与算法
- 半仓持股法：作为资金管理的底层约束（50% 现金安全垫 + 动态再平衡）。
- 仓位优化：凯利公式思想指导在不同胜率/赔率下的下注比例（与半仓法协同）。
- 时机信号：月线 MACD 金叉且站上关键均线（如 24 月），以及常见技术指标组合信号。
- 回测框架（后续）：基于历史数据评估夏普比率、最大回撤等。

## 代码结构（初始）
```
d:\app\Astore\
  ├─ 技术文档（算法）
  ├─ 设计框架
  ├─ 开发文档.md
  ├─ webapp\
  │   ├─ index.html
  │   ├─ vite.config.ts/js
  │   └─ src\
  │       ├─ main.js
  │       ├─ App.vue
  │       ├─ router\index.js
  │       ├─ views\Dashboard.vue
  │       ├─ views\StockDetail.vue
  │       └─ components\ChartKLine.vue
  │   └─ public\
  │       └─ data\sample_000001.json
  └─ data-pipeline\
      └─ fetch_akshare.py
```

## 开发与运行
- 依赖：Node.js 18+、npm；Python 3.9+（数据脚本）。
- 本地运行：
  - 初始化：在 `webapp` 执行 `npm install`
  - 开发：`npm run dev`（默认 `http://localhost:5173/`）
- 数据脚本（示例）：在 `data-pipeline/fetch_akshare.py` 中配置标的，运行生成 JSON 到 `webapp/public/data`。

## 部署与自动化（规划）
- GitHub Actions：
  - `schedule`: 每交易日 14:30 触发。
  - 步骤：`setup-python` → 运行数据脚本 → 提交 JSON → `setup-node` → 构建 → 部署到 Pages。

## 风险与合规
- 显示投资风险提示，避免误导性收益承诺。
- 避免提交敏感信息（API Key 等）到仓库。
- 数据来源须标注（AKShare/OpenAPI），并遵守使用条款。

## 迭代计划（MVP → 扩展）
- MVP：看板、个股详情、K 线与基本指标、示例数据接入。
- 扩展：策略回测、智能预警、用户系统、云函数 API、更多数据源整合。